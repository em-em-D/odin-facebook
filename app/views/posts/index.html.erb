<div class="profile">
  <h1>All posts</h1>

  <% unless @posts.empty? %>
    <%= @posts.each do |post| %>
      <div class="post-form">
          <p><strong>Author: </strong><%= post.user.email %><br></p>
          <span class = "content"><strong>Posted: </strong><%= post.content %></span>
          <p><%= post.likes.count %> <%= (post.likes.count) == 1 ? 'like' : 'likes' %></p>
          (<%= time_ago_in_words(post.created_at) %> ago.)</span><br>
          <p class= "pre-like"><%= pre_like = post.likes.find {|like| like.user_id == current_user.id} %> </p>

          <% if pre_like %>
          <%= button_to 'Unlike' , post_like_path(post, pre_like),class: 'btn-btn-primary', method: :delete  %>
          <% else %>
            <%= button_to 'Like' , post_likes_path(post , pre_like), class: 'btn btn-primary' , method: :post %>
          <% end %><br>

          <small> Submitted <%= time_ago_in_words(post.created_at) %> ago </small>
           <h3>Comments </h3>
           
           <ul>
             <%= render(partial: 'comments/comment', collection: post.comments) %>
           </ul>    
        </div>  
    <% end %>    
  <% end %>

  
</div>